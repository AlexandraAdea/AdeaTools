{% extends 'admin_base_no_sidebar.html' %}

{% block title %}{% if object %}{{ object.name }} bearbeiten{% else %}Neue Mitarbeiterin{% endif %} – AdeaZeit{% endblock %}

{% block breadcrumbs %}
<a href="{% url 'admin-dashboard' %}">Dashboard</a>
<a href="{% url 'adeazeit:employee-list' %}">Mitarbeitende</a>
<a href="{% url 'adeazeit:employee-create' %}">{% if object %}Bearbeiten{% else %}Neu{% endif %}</a>
{% endblock %}

{% block content %}
<section class="content-card" style="max-width: 900px; margin: 0 auto;">
    <h1 style="margin-bottom: 20px;">
        {% if object %}Mitarbeiterin bearbeiten{% else %}Neue Mitarbeiterin / Neuer Mitarbeiter{% endif %}
    </h1>
    <form method="post" novalidate>
        {% csrf_token %}
        
        <!-- Stammdaten -->
        <div style="margin-bottom: 24px;">
            <h2 style="margin-bottom: 12px; font-size: 1.1em; color: #1d1d1f; border-bottom: 1px solid #e5e5ea; padding-bottom: 8px;">Stammdaten</h2>
            <div style="display: grid; grid-template-columns: 1fr 2fr; gap: 20px;">
                <div>
                    <label for="{{ form.code.id_for_label }}" style="display:block; font-weight:600; margin-bottom:6px;">{{ form.code.label }} *</label>
                    {{ form.code }}
                    {% if form.code.errors %}
                    <div style="color:#ff5f57; margin-top:4px; font-size:12px;">{{ form.code.errors|striptags }}</div>
                    {% endif %}
                    {% if form.code.help_text %}
                    <small style="color:#8e8e93; font-size:0.8em; display:block; margin-top:4px;">{{ form.code.help_text }}</small>
                    {% endif %}
                </div>
                <div>
                    <label for="{{ form.name.id_for_label }}" style="display:block; font-weight:600; margin-bottom:6px;">{{ form.name.label }} *</label>
                    {{ form.name }}
                    {% if form.name.errors %}
                    <div style="color:#ff5f57; margin-top:4px; font-size:12px;">{{ form.name.errors|striptags }}</div>
                    {% endif %}
                </div>
            </div>
            <div style="margin-top: 16px;">
                <label for="{{ form.function_title.id_for_label }}" style="display:block; font-weight:600; margin-bottom:6px;">{{ form.function_title.label }} *</label>
                {{ form.function_title }}
                {% if form.function_title.errors %}
                <div style="color:#ff5f57; margin-top:4px; font-size:12px;">{{ form.function_title.errors|striptags }}</div>
                {% endif %}
            </div>
            <div style="margin-top: 16px;">
                <label for="{{ form.rolle.id_for_label }}" style="display:block; font-weight:600; margin-bottom:6px;">{{ form.rolle.label }}</label>
                {{ form.rolle }}
                {% if form.rolle.errors %}
                <div style="color:#ff5f57; margin-top:4px; font-size:12px;">{{ form.rolle.errors|striptags }}</div>
                {% endif %}
            </div>
        </div>

        <!-- Arbeitszeitmodell -->
        <div style="margin-bottom: 24px;">
            <h2 style="margin-bottom: 12px; font-size: 1.1em; color: #1d1d1f; border-bottom: 1px solid #e5e5ea; padding-bottom: 8px;">Arbeitszeitmodell</h2>
            <small style="color:#8e8e93; font-size:0.85em; display:block; margin-bottom:12px;">Alle Arbeitszeitmodelle werden manuell erfasst und können jederzeit geändert werden.</small>
            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px;">
                <div>
                    <label for="{{ form.employment_percent.id_for_label }}" style="display:block; font-weight:600; margin-bottom:6px;">{{ form.employment_percent.label }} *</label>
                    {{ form.employment_percent }}
                    {% if form.employment_percent.errors %}
                    <div style="color:#ff5f57; margin-top:4px; font-size:12px;">{{ form.employment_percent.errors|striptags }}</div>
                    {% endif %}
                    <small style="color:#8e8e93; font-size:0.8em; display:block; margin-top:4px;">Beispiel: 100.00, 60.00</small>
                </div>
                <div>
                    <label for="{{ form.weekly_soll_hours.id_for_label }}" style="display:block; font-weight:600; margin-bottom:6px;">{{ form.weekly_soll_hours.label }} *</label>
                    {{ form.weekly_soll_hours }}
                    {% if form.weekly_soll_hours.errors %}
                    <div style="color:#ff5f57; margin-top:4px; font-size:12px;">{{ form.weekly_soll_hours.errors|striptags }}</div>
                    {% endif %}
                    <small style="color:#8e8e93; font-size:0.8em; display:block; margin-top:4px;">z.B. 42.00 oder 40.00</small>
                </div>
                <div>
                    <label for="{{ form.weekly_working_days.id_for_label }}" style="display:block; font-weight:600; margin-bottom:6px;">{{ form.weekly_working_days.label }}</label>
                    {{ form.weekly_working_days }}
                    {% if form.weekly_working_days.errors %}
                    <div style="color:#ff5f57; margin-top:4px; font-size:12px;">{{ form.weekly_working_days.errors|striptags }}</div>
                    {% endif %}
                    <small style="color:#8e8e93; font-size:0.8em; display:block; margin-top:4px;">z.B. 5.0 / 4.5 / 4.0</small>
                </div>
            </div>
        </div>

        <!-- Ferien & Feiertage -->
        <div style="margin-bottom: 24px;">
            <h2 style="margin-bottom: 12px; font-size: 1.1em; color: #1d1d1f; border-bottom: 1px solid #e5e5ea; padding-bottom: 8px;">Ferien & Feiertage</h2>
            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px;">
                <div>
                    <label for="{{ form.vacation_days_per_year.id_for_label }}" style="display:block; font-weight:600; margin-bottom:6px;">{{ form.vacation_days_per_year.label }}</label>
                    {{ form.vacation_days_per_year }}
                    {% if form.vacation_days_per_year.errors %}
                    <div style="color:#ff5f57; margin-top:4px; font-size:12px;">{{ form.vacation_days_per_year.errors|striptags }}</div>
                    {% endif %}
                    <small style="color:#8e8e93; font-size:0.8em; display:block; margin-top:4px;">z.B. 20.00 / 25.00</small>
                </div>
                <div>
                    <label for="{{ form.work_canton.id_for_label }}" style="display:block; font-weight:600; margin-bottom:6px;">{{ form.work_canton.label }}</label>
                    {{ form.work_canton }}
                    {% if form.work_canton.errors %}
                    <div style="color:#ff5f57; margin-top:4px; font-size:12px;">{{ form.work_canton.errors|striptags }}</div>
                    {% endif %}
                    <small style="color:#8e8e93; font-size:0.8em; display:block; margin-top:4px;">Für zukünftige Feiertagsmodelle</small>
                </div>
                <div>
                    <label for="{{ form.holiday_model.id_for_label }}" style="display:block; font-weight:600; margin-bottom:6px;">{{ form.holiday_model.label }}</label>
                    {{ form.holiday_model }}
                    {% if form.holiday_model.errors %}
                    <div style="color:#ff5f57; margin-top:4px; font-size:12px;">{{ form.holiday_model.errors|striptags }}</div>
                    {% endif %}
                    <small style="color:#8e8e93; font-size:0.8em; display:block; margin-top:4px;">Freitext</small>
                </div>
            </div>
        </div>

        <!-- Beschäftigung -->
        <div style="margin-bottom: 24px;">
            <h2 style="margin-bottom: 12px; font-size: 1.1em; color: #1d1d1f; border-bottom: 1px solid #e5e5ea; padding-bottom: 8px;">Beschäftigung</h2>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                <div>
                    <label for="{{ form.employment_start.id_for_label }}" style="display:block; font-weight:600; margin-bottom:6px;">{{ form.employment_start.label }}</label>
                    {{ form.employment_start }}
                    {% if form.employment_start.errors %}
                    <div style="color:#ff5f57; margin-top:4px; font-size:12px;">{{ form.employment_start.errors|striptags }}</div>
                    {% endif %}
                </div>
                <div>
                    <label for="{{ form.employment_end.id_for_label }}" style="display:block; font-weight:600; margin-bottom:6px;">{{ form.employment_end.label }}</label>
                    {{ form.employment_end }}
                    {% if form.employment_end.errors %}
                    <div style="color:#ff5f57; margin-top:4px; font-size:12px;">{{ form.employment_end.errors|striptags }}</div>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Finanzen -->
        <div style="margin-bottom: 24px;">
            <h2 style="margin-bottom: 12px; font-size: 1.1em; color: #1d1d1f; border-bottom: 1px solid #e5e5ea; padding-bottom: 8px;">Verrechnung</h2>
            <div>
                <label for="{{ form.stundensatz.id_for_label }}" style="display:block; font-weight:600; margin-bottom:6px;">{{ form.stundensatz.label }}</label>
                {{ form.stundensatz }}
                {% if form.stundensatz.errors %}
                <div style="color:#ff5f57; margin-top:4px; font-size:12px;">{{ form.stundensatz.errors|striptags }}</div>
                {% endif %}
                {% if form.stundensatz.help_text %}
                <small style="color:#8e8e93; font-size:0.8em; display:block; margin-top:4px;">{{ form.stundensatz.help_text }}</small>
                {% endif %}
            </div>
        </div>

        <!-- Status & Notizen -->
        <div style="margin-bottom: 24px;">
            <h2 style="margin-bottom: 12px; font-size: 1.1em; color: #1d1d1f; border-bottom: 1px solid #e5e5ea; padding-bottom: 8px;">Status & Notizen</h2>
            <div style="margin-bottom: 16px;">
                <label for="{{ form.aktiv.id_for_label }}" style="display:flex; align-items:center; gap:8px; font-weight:600;">
                    {{ form.aktiv }}
                    {{ form.aktiv.label }}
                </label>
                {% if form.aktiv.errors %}
                <div style="color:#ff5f57; margin-top:4px; font-size:12px;">{{ form.aktiv.errors|striptags }}</div>
                {% endif %}
            </div>
            <div>
                <label for="{{ form.notes.id_for_label }}" style="display:block; font-weight:600; margin-bottom:6px;">{{ form.notes.label }}</label>
                {{ form.notes }}
                {% if form.notes.errors %}
                <div style="color:#ff5f57; margin-top:4px; font-size:12px;">{{ form.notes.errors|striptags }}</div>
                {% endif %}
            </div>
        </div>

        <div style="margin-top: 24px; padding-top: 20px; border-top: 1px solid #e5e5ea; display:flex; gap:12px; flex-wrap:wrap;">
            <button type="submit" class="adea-button-primary">
                {% if object %}Speichern{% else %}Anlegen{% endif %}
            </button>
            <a href="{% url 'adeazeit:employee-list' %}" class="adea-button-primary" style="background:#e5e5ea; color:#1d1d1f; box-shadow:none;">
                Abbrechen
            </a>
        </div>
    </form>
</section>
{% endblock %}
