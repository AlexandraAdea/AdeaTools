services:
  - type: web
    name: adeatools
    env: python
    buildCommand: pip install -r requirements.txt && python manage.py collectstatic --noinput
    startCommand: gunicorn adeacore.wsgi:application --bind 0.0.0.0:$PORT
    envVars:
      - key: PYTHON_VERSION
        value: 3.11.0
      - key: DJANGO_SETTINGS_MODULE
        value: adeacore.settings.production
    healthCheckPath: /

cronJobs:
  - name: archive-completed-tasks
    schedule: "0 2 * * *"  # TÃ¤glich um 02:00 UTC (03:00 MEZ im Winter, 04:00 MESZ im Sommer)
    command: python manage.py archive_completed_tasks
    env: python
    envVars:
      - key: PYTHON_VERSION
        value: 3.11.0
      - key: DJANGO_SETTINGS_MODULE
        value: adeacore.settings.production
