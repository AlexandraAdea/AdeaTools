{% extends 'base.html' %}

{% block title %}{% if object %}Termin bearbeiten{% else %}Neuer Termin{% endif %} – AdeaDesk{% endblock %}

{% block content %}
<section class="content-card" style="max-width: 800px; margin: 0 auto;">
    <div class="adea-d-flex-between">
        <div>
            <h1>{% if object %}Termin bearbeiten{% else %}Neuer Termin{% endif %}</h1>
            <p class="lead">Termin für {{ client.name }}</p>
        </div>
        <a href="{% url 'adeadesk:client-detail' client.pk %}" class="adea-button-primary" style="background:#e5e5ea; color:#1d1d1f; box-shadow:none;">Zurück</a>
    </div>

    <form method="post" enctype="multipart/form-data" style="margin-top: 24px;">
        {% csrf_token %}
        
        <div style="margin-bottom: 20px;">
            <label for="{{ form.event_type.id_for_label }}" style="display:block; font-weight:600; margin-bottom:6px;">{{ form.event_type.label }} *</label>
            {{ form.event_type }}
            {% if form.event_type.errors %}
            <div style="color:#ff5f57; margin-top:4px; font-size:12px;">{{ form.event_type.errors|striptags }}</div>
            {% endif %}
        </div>

        <div style="margin-bottom: 20px;">
            <label for="{{ form.title.id_for_label }}" style="display:block; font-weight:600; margin-bottom:6px;">{{ form.title.label }} *</label>
            {{ form.title }}
            {% if form.title.errors %}
            <div style="color:#ff5f57; margin-top:4px; font-size:12px;">{{ form.title.errors|striptags }}</div>
            {% endif %}
        </div>

        <div style="margin-bottom: 20px;">
            <label for="{{ form.description.id_for_label }}" style="display:block; font-weight:600; margin-bottom:6px;">{{ form.description.label }}</label>
            {{ form.description }}
            {% if form.description.errors %}
            <div style="color:#ff5f57; margin-top:4px; font-size:12px;">{{ form.description.errors|striptags }}</div>
            {% endif %}
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
            <div>
                <label for="{{ form.start_date.id_for_label }}" style="display:block; font-weight:600; margin-bottom:6px;">{{ form.start_date.label }} *</label>
                {{ form.start_date }}
                {% if form.start_date.errors %}
                <div style="color:#ff5f57; margin-top:4px; font-size:12px;">{{ form.start_date.errors|striptags }}</div>
                {% endif %}
            </div>
            <div>
                <label for="{{ form.end_date.id_for_label }}" style="display:block; font-weight:600; margin-bottom:6px;">{{ form.end_date.label }}</label>
                {{ form.end_date }}
                {% if form.end_date.errors %}
                <div style="color:#ff5f57; margin-top:4px; font-size:12px;">{{ form.end_date.errors|striptags }}</div>
                {% endif %}
            </div>
        </div>

        <div style="margin-bottom: 20px;">
            <label for="{{ form.reminder_date.id_for_label }}" style="display:block; font-weight:600; margin-bottom:6px;">{{ form.reminder_date.label }}</label>
            {{ form.reminder_date }}
            {% if form.reminder_date.errors %}
            <div style="color:#ff5f57; margin-top:4px; font-size:12px;">{{ form.reminder_date.errors|striptags }}</div>
            {% endif %}
        </div>

        <div style="margin-bottom: 20px;">
            <label for="{{ form.is_recurring.id_for_label }}" style="display:flex; align-items:center; gap:8px; font-weight:600;">
                {{ form.is_recurring }}
                {{ form.is_recurring.label }}
            </label>
            {% if form.is_recurring.errors %}
            <div style="color:#ff5f57; margin-top:4px; font-size:12px;">{{ form.is_recurring.errors|striptags }}</div>
            {% endif %}
        </div>

        <div style="margin-bottom: 20px;">
            <label for="{{ form.recurring_pattern.id_for_label }}" style="display:block; font-weight:600; margin-bottom:6px;">{{ form.recurring_pattern.label }}</label>
            {{ form.recurring_pattern }}
            <small style="color:#8e8e93; font-size:0.8em; display:block; margin-top:4px;">z.B. MONATLICH, JAERLICH</small>
            {% if form.recurring_pattern.errors %}
            <div style="color:#ff5f57; margin-top:4px; font-size:12px;">{{ form.recurring_pattern.errors|striptags }}</div>
            {% endif %}
        </div>

        <div style="margin-top: 24px; padding-top: 20px; border-top: 1px solid #e5e5ea; display:flex; gap:12px;">
            <button type="submit" class="adea-button-primary">
                {% if object %}Speichern{% else %}Anlegen{% endif %}
            </button>
            <a href="{% url 'adeadesk:client-detail' client.pk %}" class="adea-button-primary" style="background:#e5e5ea; color:#1d1d1f; box-shadow:none;">
                Abbrechen
            </a>
        </div>
    </form>
</section>
{% endblock %}



